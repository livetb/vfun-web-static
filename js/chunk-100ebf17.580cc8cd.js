(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-100ebf17"],{"09bd":function(e,t,n){"use strict";var a=n("dcd7"),r=n.n(a);r.a},1276:function(e,t,n){"use strict";var a=n("d784"),r=n("44e7"),i=n("825a"),o=n("1d80"),s=n("4840"),c=n("8aa5"),u=n("50c4"),l=n("14c3"),h=n("9263"),g=n("d039"),f=[].push,p=Math.min,d=4294967295,v=!g((function(){return!RegExp(d,"y")}));a("split",2,(function(e,t,n){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var a=String(o(this)),i=void 0===n?d:n>>>0;if(0===i)return[];if(void 0===e)return[a];if(!r(e))return t.call(a,e,i);var s,c,u,l=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,v=new RegExp(e.source,g+"g");while(s=h.call(v,a)){if(c=v.lastIndex,c>p&&(l.push(a.slice(p,s.index)),s.length>1&&s.index<a.length&&f.apply(l,s.slice(1)),u=s[0].length,p=c,l.length>=i))break;v.lastIndex===s.index&&v.lastIndex++}return p===a.length?!u&&v.test("")||l.push(""):l.push(a.slice(p)),l.length>i?l.slice(0,i):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,r,n):a.call(String(r),t,n)},function(e,r){var o=n(a,e,this,r,a!==t);if(o.done)return o.value;var h=i(e),g=String(this),f=s(h,RegExp),m=h.unicode,w=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),b=new f(v?h:"^(?:"+h.source+")",w),x=void 0===r?d:r>>>0;if(0===x)return[];if(0===g.length)return null===l(b,g)?[g]:[];var y=0,R=0,k=[];while(R<g.length){b.lastIndex=v?R:0;var C,S=l(b,v?g:g.slice(R));if(null===S||(C=p(u(b.lastIndex+(v?0:R)),g.length))===y)R=c(g,R,m);else{if(k.push(g.slice(y,R)),k.length===x)return k;for(var I=1;I<=S.length-1;I++)if(k.push(S[I]),k.length===x)return k;R=y=C}}return k.push(g.slice(y)),k}]}),!v)},"1c1e":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"chat-home-root"},[a("div",{staticClass:"a-host"},[a("van-overlay",{staticClass:"loading-overlay",attrs:{show:e.showLoadingOverlay}},[a("van-loading",{attrs:{size:"24px",color:"#1989fa",vertical:""}},[e._v("Loading...")])],1),a("div",{staticClass:"avatar",style:{backgroundImage:"url("+e.curHost.avatar+")"}}),a("div",{staticClass:"call-overlay"},[a("img",{staticClass:"to-call",attrs:{src:n("c4e3")},on:{click:e.randomCall}}),a("p",{staticClass:"call-text"},[e._v("Click to have a video chat with me!")])])],1),e.connectShow?a("Connect",{key:Date.now(),ref:"link",attrs:{uid:e.curHost.uid,poster:e.curHost.avatar},on:{close:e.closeConnect}}):e._e(),a("RechargeDialog",{attrs:{open:e.showRechargeTips},on:{confirm:e.rechargeNow,cancel:function(t){e.showRechargeTips=!1}}})],1)},r=[],i=(n("99af"),n("4160"),n("c975"),n("0d03"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("159b"),n("96cf"),n("89ba")),o=(n("8a4e"),n("6e47")),s=(n("bca0"),n("543e")),c=n("8bbf"),u=n.n(c),l=n("af82"),h=n("f38b"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-popup",{staticClass:"recharge-dialog-popup",model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[n("div",{staticClass:"to-recharge-dialog"},[n("div",{staticClass:"close",on:{click:e.cancel}},[n("van-icon",{attrs:{name:"close"}})],1),n("h2",[e._v("Insufficient Coins")]),n("p",[e._v("Please Recharge to Continue Video Chat")]),n("div",{staticClass:"button"},[n("div",{on:{click:e.confirm}},[e._v("Recharge now")])])])])},f=[],p=(n("87d0"),n("e41f"));u.a.use(p["a"]);var d={props:["open"],methods:{confirm:function(){this.$emit("confirm")},cancel:function(){this.$emit("cancel")}}},v=d,m=(n("09bd"),n("2877")),w=Object(m["a"])(v,g,f,!1,null,null,null),b=w.exports,x=n("260b"),y=(n("ea7b"),n("1c46")),R=n.n(y);u.a.use(o["a"]).use(s["a"]);var k={components:{Connect:h["a"],RechargeDialog:b},data:function(){return{page:1,chats:[],refreshing:!1,loading:!1,finished:!0,profile:{},lastDBBanner:0,connectShow:!1,curHost:null,alreadyLogin:!1,showLoadingOverlay:!0,ruid:Math.random().toString().substr(2)}},created:function(){console.log("Home Created");var e=JSON.parse(localStorage.getItem("profile")||"{}"),t=localStorage.getItem("token");e.uid&&t?this.loginSuccess():this.startMuteLogin()},methods:{tracking:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem("profile")||"{}"),n=JSON.parse(localStorage.getItem("trackInfo")||"{}"),t.uid&&n.source){e.next=5;break}return console.log("no trackinfo => ",t,n),e.abrupt("return");case 5:return e.next=7,l["p"](t.uid,n.source,n.refby);case 7:a=e.sent,r=a.status,i=a.data,console.log("Tracking: ",r," => ",i);case 11:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),anonymousLogin:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,i,o,s,c,u,h,g,f,p,d,v,m,w,b,y,k,C;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Date.now(),a=4,r=x["a"].auth().languageCode||"cn",i=306,o=t.photoURL,s=t.email,c=t.uid,u=t.displayName,h=c,g=6,f=c,p=R.a.createHash("md5"),d="fjsihWdgr;_#78JI9&)!kjGHRERGRFeu342",v=p.update(h+n+d).digest("hex"),m={appId:i,loginId:h,thirdType:g,deviceCode:f,deviceType:a,requestTime:n,sign:v,regionCode:r,nickName:u,avatar:o,email:s},e.next=14,l["g"](m);case 14:w=e.sent,b=w.status,y=w.data,0===b&&(k=y.token,C=y.user,localStorage.setItem("token",k),localStorage.setItem("profile",JSON.stringify(C)));case 18:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),loginSuccess:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t||(t=(new Date).toString()),console.log("AlreadyLogin ï¼š",t),this.alreadyLogin=!0;case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),startMuteLogin:function(){var e=this;x["a"].auth().signInAnonymously().then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.user,console.log("signInAnonymously",a),t.next=4,e.anonymousLogin(a);case 4:return t.next=6,e.loginSuccess();case 6:e.tracking();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.showLoginOverlay=!1,e.$toast(t.message)}))},closeConnect:function(){this.connectShow=!1},showRecharge:function(){Date.now()-this.lastDBBanner<1e3&&(this.$router.push("/recharge?showInfo"),console.log("Router push recharge")),this.lastDBBanner=Date.now()},moreToPersonal:function(){this.$router.push("/recharge")},getUrlparam:function(e,t){t||(t=window.location.href);var n=t.indexOf("?");if(n<0)return null;t=t.substr(n+1);var a=t.split("&"),r=null;return a.forEach((function(t){var n=t.split("=");n[0]!==e||(r=n[1])})),r},countAccess:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("trackInfo")||"{}"),n=JSON.parse(localStorage.getItem("profile")||"{}").uid,t.source||(t.source=t.appID||305),t.refby||(t.refby=t.appID||305),e.next=6,l["r"](n,t.source,t.refby);case 6:a=e.sent,r=a.status,i=a.msg,console.log("CountAccess: ",r,i);case 10:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loadData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["f"](this.ruid,this.page);case 2:t=e.sent,n=t.data,a=t.status,this.refreshing=!1,this.loading=!1,0===a&&(r=n.records,i=n.total,1===this.page?this.chats=r||[]:this.chats=this.chats.concat(r||[]),this.chats.length>=i?this.finished=!0:this.finished=!1),o=~~(Math.random()*this.chats.length),this.curHost=this.chats[o],s=window.location.href,/inTest/gi.test(s)&&(this.curHost.uid=0xbbaca5f2c1a6c);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onLoad:function(){this.page=this.page+1,this.loadData()},onRefresh:function(){this.page=1,this.loadData()},goChatDetail:function(e){console.log("chat detail => ",e)},queryBalance:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["o"](this.profile.uid);case 2:return t=e.sent,n=t.status,a=t.data,console.log("QueryBalance => ",n,a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),rechargeNow:function(){this.$router.push("/recharge?showInfo")},randomCall:function(){this.alreadyLogin?(this.connectShow=!0,this.showLoadingOverlay=!1):this.$toast("Please waiting a minute...")}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{$route:function(e,t){console.log("Router change: ",e," => ",t),/\/login/gi.test(t.path)&&(console.log("From Login, Refresh List.",(new Date).toString()),this.chats=[],this.page=1,this.loadData(),this.$router.replace("/home"))}}},C=k,S=(n("a415"),Object(m["a"])(C,a,r,!1,null,null,null));t["default"]=S.exports},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),i=n("b622"),o=i("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==r(e))}},a415:function(e,t,n){"use strict";var a=n("c1a7"),r=n.n(a);r.a},c1a7:function(e,t,n){},c4e3:function(e,t,n){e.exports=n.p+"img/video-button.6fb07b13.png"},c975:function(e,t,n){"use strict";var a=n("23e7"),r=n("4d64").indexOf,i=n("b301"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf");a({target:"Array",proto:!0,forced:s||c},{indexOf:function(e){return s?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},dcd7:function(e,t,n){}}]);
//# sourceMappingURL=chunk-100ebf17.580cc8cd.js.map